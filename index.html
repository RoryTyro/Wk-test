<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://iclientsimulator.test.tyro.com/iclient-with-ui-v1.js"></script>
    <script>
    
    var apiKey = "Test API Key";
    var posProductInfo = {
        posProductVendor: "Acme Co",
        posProductName: "WKWebView test",
        posProductVersion: "1.0.0",
        siteReference: "E.g. my customer ID or address"
    };
    var iclient = new TYRO.IClientWithUI(apiKey, posProductInfo);
    
    var transactionCompleteHandler = function(response){
        window.webkit.messageHandlers.jsHandler.postMessage(response);
    };
    var receiptHandler = function(receipt){
        window.webkit.messageHandlers.jsHandler.postMessage(receipt);
    };
    function doPurchase(amount){
    iclient.initiatePurchase({
        amount: amount,
        enableSurcharge: false,
        posProductData: "RoryPOS",
        integratedReceipt: true
    }, {
        receiptCallback: receiptHandler,
        transactionCompleteCallback: transactionCompleteHandler
    });
    }
    </script>
</head>
<body>
    <p id="demo">Purchase with pairing and dynamic amount</p>
<iframe src="https://iclientsimulator.test.tyro.com/configuration.html" title="pairing page"></iframe>
</body>
</html>
